<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js"></script>
<script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script> 

<div style ="height: 50px; width: 50px; border-style : outset; border-width:1px;border-radius : 10px;box-shadow :3px 3px 3px #969696 ;padding:1px 10px 0px 10px;cursor:pointer;" onclick="play_to_end()">Try it</div>

<model-viewer id="homme"  camera-controls  style="width: 400px; height: 400px;" interaction-prompt="none" src="{root_url}/uploads/images/histoire/homme/cranes/scene(20).glb" alt="">

</model-viewer>

<script>
function play_to_end (){
//play to end or rewind if animation is at end//
	const modelViewer = document.querySelector('#homme');
	modelViewer.play();
	t=modelViewer.duration;
	t=t*1000/2 ;// because duration is in second and time to play and rewind//
	setTimeout(stop, t);
}
function stop(){
const modelViewer = document.querySelector('#homme');
modelViewer.pause();
}
</script>
